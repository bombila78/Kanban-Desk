(this["webpackJsonpkanban-desk"]=this["webpackJsonpkanban-desk"]||[]).push([[0],{19:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareTodoStatuses=void 0,t.compareTodoStatuses=function(e,t){return e.priority-t.priority}},21:function(e,t,n){e.exports=n(47)},26:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),o=n(17),s=n.n(o),i=(n(26),function(){return c.a.createElement("nav",null,c.a.createElement("div",{className:"nav-wrapper blue darken-2"},c.a.createElement("a",{href:"/",className:"brand-logo"},"Kanban-Desk")))}),u=n(2),l=n.n(u),d=n(3),m=n(20),f=n(4);!function(e){e[e.todoId=1]="todoId",e[e.inProgressId=2]="inProgressId",e[e.doneId=3]="doneId"}(a||(a={}));var p=function(e){var t=e.title,n=e.changeStatusHandler,a=e.todoId;return c.a.createElement("button",{className:"btn waves-effect waves-light",onClick:function(){return n(a)}},t,c.a.createElement("i",{className:"material-icons right"},"send"))},h=n(18),v=n.n(h),b=function(e){var t=e.todo,n=e.changeStatusHandler,o=e.destroyTodoHandler,s=Object(r.useState)(""),i=Object(f.a)(s,2),u=i[0],l=i[1],d=Object(r.useState)(""),m=Object(f.a)(d,2),h=m[0],b=m[1];Object(r.useEffect)((function(){if(t.startTimestamp){var e=setInterval((function(){l(v()(Date.now()-t.startTimestamp).subtract(3,"h").format("HH:mm:ss"))}),1e3);return function(){return clearInterval(e)}}}),[]),Object(r.useEffect)((function(){if(t.startTimestamp&&t.finishTimestamp){var e=1e3*((t.finishTimestamp-t.startTimestamp)/36e5),n=new Intl.NumberFormat("en-In",{currency:"usd",style:"currency"}).format(e);b(n)}}),[]);return c.a.createElement("div",{className:"col s12"},c.a.createElement("div",{className:"card blue-grey darken-1 center"},c.a.createElement("div",{className:"card-content white-text"},c.a.createElement("span",{className:"card-title"},t.title)),function(){switch(t.status_id){case a.todoId:return c.a.createElement("span",{className:"not-started"},"Task not started");case a.inProgressId:return c.a.createElement("span",{className:"timer"},u);case a.doneId:return c.a.createElement("span",{className:"price"},h);default:return null}}(),c.a.createElement("div",{className:"card-action"},function(){switch(t.status_id){case a.todoId:return c.a.createElement(p,{title:"\u041d\u0430\u0447\u0430\u0442\u044c",todoId:t.id,changeStatusHandler:n});case a.inProgressId:return c.a.createElement(p,{title:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c",todoId:t.id,changeStatusHandler:n});case a.doneId:return c.a.createElement(p,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443",todoId:t.id,changeStatusHandler:o});default:return null}}())))},E=function(e){var t=e.title,n=e.todos,a=e.changeStatusHandler,r=e.destroyTodoHandler,o=n.map((function(e){return c.a.createElement(b,{todo:e,changeStatusHandler:a,destroyTodoHandler:r})}));return c.a.createElement("div",{className:"col s4"},c.a.createElement("div",{className:"desk-column-wrapper"},c.a.createElement("div",{className:"desk-column yellow lighten-4"},c.a.createElement("h4",null,t),o)))},w=n(6),g=n.n(w);function y(){return k.apply(this,arguments)}function k(){return(k=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/todos");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/api/todos/create",{todo:t});case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/api/todos/update",{todo:t});case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/api/todos/destroy",{id:t});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=n(19),O=function(){var e=Object(r.useState)([]),t=Object(f.a)(e,2),n=t[0],o=t[1],s=Object(r.useState)([]),i=Object(f.a)(s,2),u=i[0],p=i[1],h=function(e){var t=n.reduce((function(e,t){return e.push.apply(e,Object(m.a)(t.Todos)),e}),[]).find((function(t){return t.id===e}));t&&(t.status_id=t.status_id+1,t.status_id===a.inProgressId&&(t.startTimestamp=Date.now()),t.status_id===a.doneId&&(t.finishTimestamp=Date.now()),function(e){return N.apply(this,arguments)}(t).then((function(){y().then((function(e){o((function(t){return e}))}))})).catch((function(e){return console.error(e)})))},v=function(e){(function(e){return T.apply(this,arguments)})(e).then((function(){y().then((function(e){o((function(t){return e}))}))}))};return Object(r.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:t=e.sent,o(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){p((function(){return n.sort(j.compareTodoStatuses).map((function(e){return c.a.createElement(E,{title:e.alias,todos:e.Todos,destroyTodoHandler:v,changeStatusHandler:h})}))}))}),[n]),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"button-container center"},c.a.createElement("button",{className:"btn-floating btn-large waves-effect waves-light red",onClick:function(){var e=window.prompt("Provide a new ToDo, please");if(null!=e&&e.trim()){var t=n.find((function(e){return"To Do"===e.alias}));if(t){var a={id:0,title:e,status_id:t.id};(function(e){return I.apply(this,arguments)})(a).then((function(e){return a.id=e})).then((function(){y().then((function(e){o((function(t){return e}))}))})).catch((function(e){return console.error(e)}))}else alert("Todo statuses are undefined")}else alert("You should write something")}},c.a.createElement("i",{className:"material-icons"},"add"))),c.a.createElement("div",{className:"row"},u))},S=(n(46),function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(i,null),c.a.createElement("h2",{className:"desk-title"},"ToDo Desk"),c.a.createElement(O,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.98feba84.chunk.js.map